@model UserViewModel
@inject SignInManager<AppUser> signInManager
@inject UserManager<AppUser> userManager;


@{
    var userId = userManager.GetUserId(User);
}

<div class="mt-5 bg-light mx-auto rounded shadow">
    <div class="bg-dark rounded" style="width:100%;height:15rem;position:relative;">
        <div class="d-flex flex-wrap align-items-center gap-3 mb-1" style="position:absolute;bottom:0;left:5%;">
            <img class="rounded border border-white" src="@("/Images/"+Model.ImageString)" alt="user pic" style="height:7rem;width:7em;" asp-append-version="true" />
            <div class="text-white">
                <p class="fw-bold fs-5 mb-1">@Model.FullName <span>(@Model.UserName)</span></p>
                @if (userId == Model.Id)
                {                
                    <a class="btn btn-secondary" asp-controller="User" asp-action="Edit" asp-route-id="@Model.Id">Edit Profile</a>
                }
            </div>
        </div>
        <div style="position:absolute;bottom:3%;right:2%;">
            <button class="btn btn-success">Follow</button>
        </div>
    </div>

    <div class="mt-2">
        <div class="border-bottom mb-3 d-flex flex-wrap gap-3 justify-content-md-end pb-3 pe-3">
            <div class="d-flex flex-column">
                <span class="text-center fw-bold">@Model.UserRecipes.Count</span>
                <span>Recipe</span>
            </div>
            <div class="d-flex flex-column">
                <span class="text-center fw-bold">0</span>
                <span>Folowing</span>
            </div>
            <div class="d-flex flex-column">
                <span class="text-center fw-bold">0</span>
                <span>Followers</span>
            </div>
        </div>
        <div class="pb-5 px-5">
            <h2>Recipes</h2>
            @if(userId == Model.Id)
            {
                <partial name="_DisplayUserProductPartial" model="@Model.UserRecipes"/>
            }
            else
            {
                <partial name="_DisplayProductPartial" model="@Model.UserRecipes" />
            }
    </div>
    </div>
</div>
